appId: com.bitadmin.autoslides
productName: AutoSlides
copyright: Copyright Â© 2024 BIT-admin

# Output directory for installer
directories:
  buildResources: resources
  output: out/make

# Asar configuration - unpack native modules
asar: true
asarUnpack:
  - "**/*.node"
  - "**/sharp/**/*"
  - "**/@img/**/*"

# Native module rebuild
npmRebuild: true

# Windows configuration
win:
  target:
    - target: nsis
      arch:
        - x64
  icon: resources/img/icon.ico
  artifactName: ${productName}-Setup-${version}.${ext}

# NSIS installer configuration
nsis:
  # Use assisted installer (not one-click) for more control
  oneClick: false

  # Install for all users (per-machine) by default - installs to C:\Program Files
  perMachine: true

  # Allow user to change installation directory
  allowToChangeInstallationDirectory: true

  # Allow elevation for installation
  allowElevation: true

  # Create desktop shortcut
  createDesktopShortcut: true

  # Create Start Menu shortcut
  createStartMenuShortcut: true

  # Shortcut name
  shortcutName: AutoSlides

  # Run application after installation finishes
  runAfterFinish: true

  # Delete app data on uninstall (clean uninstall)
  deleteAppDataOnUninstall: true

  # Installer icons
  installerIcon: resources/img/icon.ico
  uninstallerIcon: resources/img/icon.ico

  # Include uninstaller
  uninstallDisplayName: AutoSlides

  # License file (will be shown during installation)
  license: resources/license.rtf

  # Custom NSIS script to set install directory to C:\Program Files\AutoSlides
  include: resources/installer.nsh

  # Language settings - support multiple languages
  unicode: true

  # Menu category
  menuCategory: true

  # Installer language selection
  installerLanguages:
    - en_US
    - zh_CN

# Linux configuration
linux:
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
  icon: resources/img/icon.png
  category: Education
  artifactName: ${productName}-${version}-${arch}.${ext}
  synopsis: Automated slide extraction from video streams
  description: AutoSlides is a desktop application for automated slide extraction from educational video content.
  maintainer: BIT-admin <info@ruc.edu.kg>

# AppImage configuration
appImage:
  artifactName: ${productName}-${version}-${arch}.${ext}

# Deb package configuration
deb:
  depends:
    - libgtk-3-0
    - libnotify4
    - libnss3
    - libxss1
    - libxtst6
    - xdg-utils
    - libatspi2.0-0
    - libuuid1
    - libsecret-1-0
  recommends:
    - ffmpeg
  artifactName: ${productName}-${version}-${arch}.${ext}

# Compression settings
compression: maximum

# Disable auto-updating publishing
publish: null
